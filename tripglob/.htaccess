<IfModule mod_rewrite.c>
    RewriteEngine On

    # If the requested file or directory does not exist
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Rewrite to index.php with the requested URI
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

# Allow CORS (only if needed, adjust * to specific domains in production)
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>

# PHP settings (for PHP 7.2, adjust as needed)
<IfModule php7_module>
    php_flag display_errors On
    php_value max_execution_time 300
    php_value max_input_time 600
    php_value max_input_vars 1000
    php_value memory_limit 1024M
    php_value post_max_size 32M
    php_value upload_max_filesize 32M
    php_flag zlib.output_compression On
</IfModule>

# If using php-fpm (common in Ubuntu)
<IfModule proxy_fcgi_module>
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/run/php/php7.2-fpm.sock|fcgi://localhost"
    </FilesMatch>
</IfModule>
